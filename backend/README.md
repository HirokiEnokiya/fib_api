# Express Backend

## 概要

このディレクトリは、アプリのバックエンドAPI（Node.js + Express + TypeScript）を管理します。

---

## セットアップ手順

1. 依存パッケージのインストール

```bash
npm install
```

2. 開発サーバーの起動

```bash
npm run dev
```

3. ポート番号  
デフォルト: `8080`  
環境変数 `PORT` で変更可能

---

## ディレクトリ構成

- `src/` ... ソースコード本体
  - `constants/` ... 定数（HTTPステータスやメッセージ）
  - `routes/` ... ルーティング（APIエンドポイント）
    - `fib.ts` ... フィボナッチ数列API
  - `utils/` ... ユーティリティ関数
    - `fibCalc.ts` ... フィボナッチ計算ロジック
    - `fibCalc.test.ts` ... ユーティリティのテスト
  - `index.ts` ... エントリーポイント
- `sample.test.ts` ... サンプルテスト
- `jest.config.js` ... Jest設定
- `tsconfig.json` ... TypeScript設定

---

## APIエンドポイント

- `GET /api/fib/:n`  
  n番目のフィボナッチ数を返す（例: `/api/fib/10` → 55）

---

## テスト実行

```bash
npm test
```

---

## 保守・運用のポイント

- **型安全**: TypeScriptで型安全に実装されています。型エラーが出た場合は`tsc`で型チェックしてください。
- **エラーハンドリング**: 500エラーや400エラー時はログが`console.error`で出力されます。サーバーログを確認してください。
- **環境変数**: ポート番号などは`.env`で管理することも推奨です（現状未対応の場合は拡張してください）。

---

## よくあるトラブル

- **ポート競合**: 既に8080番が使われている場合、`PORT`環境変数で変更してください。
- **CORSエラー**: フロントエンドと連携時にCORSが必要な場合は`express`のCORSミドルウェアを導入してください。
- **依存関係エラー**: `npm install`で解決しない場合は`node_modules`削除後に再インストールしてください。

---

## 拡張・カスタマイズ

- 新しいAPI追加時は`src/routes/`にルートを追加し、必要に応じて`utils/`や`constants/`配下にロジックや定数を実装してください。
- 永続化DB対応や認証追加などは、Expressのミドルウェアや外部サービスを活用して拡張してください。

## デプロイについて
このバックエンドは[Render](https://render.com/)にデプロイすることを想定したテンプレートです。
